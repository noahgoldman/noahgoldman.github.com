<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <script type="text/javascript">var _sf_startpt=(new Date()).getTime()</script>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <meta content="en-us" http-equiv="Content-Language" />
    <meta content="The online writing of Alex Payne" name="description" />
    <link href="/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <link href="/css/screen.css" media="screen, projection" rel="stylesheet" type="text/css" />
    <link rel="alternate" type="application/atom+xml" title="Alex Payne - Atom" href="http://feeds2.feedburner.com/al3x" />
    <title>Alex Payne &mdash; C4[1]: Bob Ippolito on Exploring Erlang</title>
    <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-18477555-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

  </head>
  <body>
    <header>
      <h1 id="title">
	    Noah Goldman
        <a href="/about.html" title="About">About</a> writes online <a href="/" title="Home">here</a>.

      </h1>
    </header>
    <div id="fusionad">
  <small>advertisement</small>
  <script type='text/javascript'><!--//<![CDATA[
     var m3_u = (location.protocol=='https:'?'https://adn.fusionads.net/www/pull/get.php':'http://adn.fusionads.net/www/pull/get.php');
     var m3_r = Math.floor(Math.random()*99999999999);
     if (!document.MAX_used) document.MAX_used = ',';
     document.write ("<scr"+"ipt type='text/javascript' src='"+m3_u);
     document.write ("?zoneid=38&amp;charset=UTF-8&amp;withtext=1");
     document.write ('&amp;cb=' + m3_r);
     if (document.MAX_used != ',') document.write ("&amp;exclude=" + document.MAX_used);
     document.write ('&amp;charset=UTF-8');
     document.write ("&amp;loc=" + escape(window.location));
     if (document.referrer) document.write ("&amp;referer=" + escape(document.referrer));
     if (document.context) document.write ("&context=" + escape(document.context));
     if (document.mmm_fo) document.write ("&amp;mmm_fo=1");
     document.write ("'><\/scr"+"ipt>");
  //]]>--></script>
  <br />
  <a href="http://fusionads.net" title="Powered by Fusion Ads">POWERED by FUSION</a>
</div>
    <div id="wrapper">
      <h2 id="intro">An individual post follows.</h2>
<article class="post">
<h1>C4<sup class="footnote" id="fnr1"><a href="#fn1">1</a></sup>: Bob Ippolito on Exploring Erlang</h1>
<p>Speaker works for Mochi Media, which builds analytics tools for Flash developers,  ad targeting systems, etc. Their applications have high concurrency needs.</p>
<h2>Introduction</h2>
<p>Erlang is a functional language that revolves around a &#8220;process&#8221; abstraction.  The language has no mutable data structures; which apparently necessitates lots of linked lists.  State exists solely in the stack, so backtraces are comprehensive.  A common pattern is to use accumulators that make use of tail calls (calls to another function at the end of a function).  Another language feature is pattern matching, which binds variables when patterns are matched.</p>
<h2>Types</h2>
<p>Two collection types are available: lists and tuples.  Basic types include atoms (effectively a constant string, apparently quite fast to work with), binary (a contiguous chunk of bytes), integer (unbounded), float (64-bit), and ref (a unique reference across a cluster of nodes).  Other data types include fun (anonymous functions, which are serialized and close over variables), pid (reference to a process, which can be on another node), port (reference to a driver, socket, pipe, and so on, much like a pid).  There are no boolean, character, or string types; the above types meet these needs in various configurations.</p>
<h2>Syntax</h2>
<p>Variable start with a capital letter, and can only be assigned once (&#8220;single assignment&#8221;).  Equivalency (=) is a simple form of pattern matching.  Case statements can take advantage of pattern matching in more complex ways; an example of matching particular dates in given.  Pattern matching is also ideal for working with file formats and a bits-and-bytes level; an example of checking for Flash files is shown.  Expressions end in commas (delimit expressions), semicolons (delimits clauses), and periods (which end expressions or trigger evaluation in the shell).  Anything that starts with a question mark is a compiler macro.  Exclamation points mean &#8220;send a message to the left&#8221;.</p>
<h2>Modules</h2>
<p>Modules exist in a flat namespace, and explicitly export &#8220;public&#8221; functions.  Modules are referenced by name (which is an atom) and compiled to a .beam file.  Erlang boasts hot code reloading, and modules take advantage of this.  When declaring functions, arity (the number of variables the function takes) is noted.  To compile all the modules in your project  just do make:all([load]).</p>
<h2>Processes</h2>
<p>Bob notes that Erlang processes are lightweight and fast, being neither native threads nor pthreads, but rather lightweight green threads.  Processes communicate only with asynchronous messages, which they may selectively receive.  Because there are no mutable variables, processes are where program state lives.  Server processes are written in tail-recursive loops.  Matching and logging unexpected messages is considered best practice; unhandled messages will pile up, which is effectively a memory leak.</p>
<h2>Distributed</h2>
<p>There&#8217;s little security between nodes; a shared secret cookie is standard.  Language semantics are such that communication between nodes works just like local communication.  Nodes may connect transitively.  It&#8217;s fairly simple to start multiple nodes and add process monitoring.  Erlang is designed around the idea that nodes will fail, and as such it&#8217;s easy to trap errors and restart nodes.</p>
<h2><span class="caps">OTP</span></h2>
<p>Originally designed for high-availability telephony, <span class="caps">OTP</span> is now a way of designing fault-tolerant applications in Erlang.  An <span class="caps">OTP</span> is a tree of supervisor processes which start, monitor, and restart child processes.  Also available in <span class="caps">OTP</span> are behaviors, which are a kind of enforced inheritance.  The example of gen_server and its conventions is shown.</p>
<h2>Demo</h2>
<p>The presentation was being given from a simple Erlang-based web server, which Bob then load tests to varying degrees, demonstrating excellent performance.  Bob mentions that the networking core of Erlang is multiplexed and takes advantage of the OS-level polling features (kqueue, etc.).  Performance for their app has been excellent: millions of hits per day per server.</p>
<h2>Questions</h2>
<p>The &#8220;Programming Erlang&#8221; book is &#8220;an extremely good resource,&#8221; says Bob.</p>
<time class="signoff" datetime="2007-08-11">
  &mdash;Aug 11, 2007
</time>
</article>

      <footer id="footer">
        <a href="/" title="Home">Home</a> &bull;
        <a href="/about.html" title="About the author and site">About</a> &bull;
        <a href="/archive.html" title="Archived writing">Archive</a> &bull;
        <a href="/books_talks.html" title="Books and talks">Books & Talks</a>
        <form action="http://www.google.com/cse" id="cse-search-box">
          <div>
            <input type="hidden" name="cx" value="000652178004161548235:gnplrkdmhbu" />
            <input type="hidden" name="ie" value="UTF-8" />
            <input type="text" name="q" size="40" />
            <input type="submit" name="sa" value="Search" />
          </div>
        </form>
      </footer>
    </div>
  </body>
</html>
